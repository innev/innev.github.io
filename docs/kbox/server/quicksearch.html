<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Global Members defaultBackendPath when running with [NODE_RT=babel], directly use source files Source: utils/Helpers.js &lt;readonly&gt; module:Literal :string Common constant definitions. Type: string Source: enum/Literal.js Methods addRoute(router, method, route, actions) Add a route to a router, skipped while the server running in deaf mode. Parameters: Name Type Description router method route actions Source: Routable.js addRouter(nestedRouter) Attach a router to this app module, skipped while the server running in deaf mode Parameters: Name Type Description nestedRouter Router Source: Routable.js encoding(value, algorithm, encoding) 对字符串进行sha1加密 Parameters: Name Type Description value algorithm encoding Source: utils/Helpers.js Returns: Type string getMiddlewareFactory(name) Get the factory method of a middleware from module hierarchy. Parameters: Name Type Description name Source: Routable.js Returns: Type function getService(name) Get a service from module hierarchy Parameters: Name Type Description name Source: ModuleBase.js Returns: Type object loadMiddlewaresFrom(dir) Load and regsiter middleware files from a specified path. Parameters: Name Type Description dir Source: Routable.js log(level, message, rest) Default log method, may be override by loggers feature Parameters: Name Type Argument Description level string Log level message string Log message rest object &lt;repeatable&gt; Extra meta data Source: ModuleBase.js Returns: Type Routable module:Middleware_AccessLog(name, app) Get a cached middleware from the app's object store. Parameters: Name Type Description name string Name of the middleware stored in the app's object store. app Routable Source: middlewares/fromStore.js Returns: Type AsyncFunction module:Middleware_Action(controllerAction, app) Action middleware creator Parameters: Name Type Description controllerAction string app Routable Source: middlewares/action.js module:Middleware_FlashMessage() add message to flash messages ctx.flashMessage.warning = 'Log Out Successfully!'; read all flash messages ctx.state.flashMessage.messages // or ctx.flashMessage.messages read warning message ctx.state.flashMessage.warning Source: middlewares/flashMessage.js module:Middleware_KboxPassportCheck(options, app) 结合passport进行用户登录前认证 Parameters: Name Type Description options object app Routable Properties: Name Type Argument Description options.appSecret string &lt;optional&gt; appSecret options.loginUrl string &lt;optional&gt; 未登录时跳转的地址 options.ignorePath array &lt;optional&gt; 忽略不需要登录的地址 options.successReturnToOrRedirect boolean &lt;optional&gt; 直接返回还是重定向 Source: middlewares/kboxPassportCheck.js Example \"middlewares\": [ [ \"kboxPassportCheck\", { \"loginUrl\": \"/login\", \"ignorePath\": [\"/home\", \"^\\/user/auth\\/.*\\/callback$\"] } ] ] module:Middleware_PassportCheck(options, app) Initialize ensureLoggedIn middleware Parameters: Name Type Description options object app Routable Properties: Name Type Argument Description options.loginUrl string &lt;optional&gt; If given, will redirect to loginUrl if not loggedIn options.successReturnToOrRedirect boolean &lt;optional&gt; If given, will redirect to loginUrl if not loggedIn Source: middlewares/passportCheck.js module:Middleware_Render( [options], app) Initiate the render middleware Parameters: Name Type Argument Description options Object &lt;optional&gt; Template options app Routable The owner app module Properties: Name Type Argument Description options.locale string &lt;optional&gt; Request code file Source: middlewares/render.js Examples \"middlewares\": [ \"render\" ] //默认加载的编码包是 code-zh_cn.json OR \"middlewares\": { \"render\": {} } //默认加载的编码包是 code-zh_cn.json \"middlewares\": { \"render\": { \"locale\": \"code-zh_cn.json\" } } exports.home = async ctx =&gt; { const db = ctx.appModule.db('data_center.Province'); // 返回正确结果或页面 ctx.render.success(await db.find({})); // 使用render会赋值给 ctx.body ，不需要自己写 ctx.body = XXX // 返回错误结果或页面 ctx.render.error(new Error('错误')); // 使用render会赋值给 ctx.body ，不需要自己写 ctx.body = XXX // 赋值适配 ctx.render.adapter(40) // 数字类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":40} ctx.render.adapter(null) // Null, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":\"\"} ctx.render.adapter('Hello World!') // 字符类型, {\"code\":200,\"msg\":\"请求成功\",\"data\":\"Hello World!\"} ctx.render.adapter({ title: 'Hello World!' }) // Object类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":{\"title\":\"Hello World!\"}} ctx.render.adapter([ { title: 'Hello World!'}, { title: 'Hello World!' } ]) // 数组类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":[{\"title\":\"Hello World!\"},{\"title\":\"Hello World!\"}]} ctx.render.adapter({ code: 200, data: 'Hello World!', msg: '正常' }) // 含有code的类型, 原样返回 {\"code\":200,\"data\":\"Hello World!\",\"msg\":\"正常\"} ctx.render.adapter({ code: 45, data: 'Hello World!', msg: '异常' }) // 含有code的类型, 原样返回 {\"code\":45,\"data\":\"Hello World!\",\"msg\":\"异常\"} ctx.render.adapter(new Error('程序中断')) // Error类型，返回 {\"code\":500,\"msg\":\"程序中断\",\"data\":\"程序中断\"} } module:Middleware_Session(options, app) Initialize session middleware Parameters: Name Type Description options object Session options app Routable Properties: Name Type Argument Default Description options.key string &lt;optional&gt; 'mowa:sid' Cookie name defaulting to mowa.sid options.prefix string &lt;optional&gt; 'mowa:sess:' Session prefix for store, defaulting to mowa:sess: options.maxAge number &lt;optional&gt; SessionStore's expiration time (ms), defaulting to 86400000 (1 day) options.autoCommit bool &lt;optional&gt; true Automatically commit headers (default true) options.overwrite bool &lt;optional&gt; true Can overwrite or not (default true) options.httpOnly bool &lt;optional&gt; true HttpOnly or not (default true) options.signed bool &lt;optional&gt; true Signed or not options.rolling bool &lt;optional&gt; false Force a session identifier cookie to be set on every response. The expiration is reset to the original maxAge, resetting the expiration countdown. (default is false) options.renew bool &lt;optional&gt; false Renew session when session is nearly expired, so we can always keep user logged in. (default is false) options.genSid function &lt;optional&gt; The way of generating external session id is controlled by the options.genid, which defaults to Date.now() + '-' + uid.sync(24) options.valid function &lt;optional&gt; valid(ctx, session), valid session value before use it options.beforeSave function &lt;optional&gt; beforeSave(ctx, session), hook before save session options.store object &lt;optional&gt; Session store instance. It can be any Object that has the methods set, get, destroy like MemoryStore. Source: middlewares/session.js module:Middleware_Views( [options], app) Initiate the views middleware Parameters: Name Type Argument Description options Object &lt;optional&gt; Template options app Routable The owner app module Properties: Name Type Argument Description options.extension string &lt;optional&gt; Default extension for your views options.map Object &lt;optional&gt; Extensions to engines map options.options Object &lt;optional&gt; View state locals Source: middlewares/views.js Examples \"middlewares\": [ \"views\" ] //使用默认的consolidate进行页面渲染 \"middlewares\": { \"views\": { \"map\": { \"html\": \"twig\" } } } exports.home = async ctx =&gt; { const data = { \"title\": \"Home Page\" }; // 单独使用页面渲染器 await ctx.viewRender(\"index\", data); // 使用viewRender对index.html进行渲染 // 跟render配合使用，render会根据请求类型自动判断渲染为页面或返回格式化json ctx.render.success(data, 'index'); // 跟render配合使用，对index.html进行渲染 （推荐方式） } module:Router_Gaml(app, baseRoute, options) Create a gaml router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gaml.js Example '&lt;base path&gt;': { gaml: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ module:Router_Module(app, baseRoute, moduleItem) Create a module-based router. Parameters: Name Type Description app Routable baseRoute string moduleItem * Source: routers/module.js Example '&lt;base path&gt;': { module: { middlewares: controller: } } '&lt;base path&gt;': { module: \"controller\" } module:Router_Rest(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gateway.js Example '&lt;base path&gt;': { gateway: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list', metadataEndpoint: '/_meta' } } route http method function of ctrl /:resource get query /:resource post create /:resource/:id get detail /:resource/:id put update /:resource/:id delete remove module:Router_Rest(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rest.js Example '&lt;base path&gt;': { rest: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ module:Router_Rest(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rpc.js Example '&lt;base path&gt;': { rpc: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list' } } route http method function of ctrl /:model/:method post model.method registerMiddlewareFactory(name, factoryMethod) Register the factory method of a named middleware. Parameters: Name Type Description name string The name of the middleware factoryMethod function The factory method of a middleware Source: Routable.js require(relativePath) Require a js module from backend path Parameters: Name Type Description relativePath * Source: ModuleBase.js requireFromLib(relativePath) Require a module from the source path of a library module Parameters: Name Type Description relativePath * Source: ModuleBase.js toWebPath(relativePath [, pathOrQuery]) Translate a relative path and query parameters if any to a url path Parameters: Name Type Argument Description relativePath string Relative path pathOrQuery * &lt;optional&gt; &lt;repeatable&gt; Queries Source: Routable.js Returns: Type string useMiddlewares(router, middlewares) Use middlewares Parameters: Name Type Description router Router middlewares * Can be an array of middleware entries or a key-value list of registerred middlewares Source: Routable.js Returns: Type Routable wrapAction(ctx, action) Prepare context for koa action Parameters: Name Type Description ctx Object Koa request context action function Action function Source: Routable.js Returns: Type function Type Definitions &lt;async&gt; KoaActionFunction(ctx [, next]) Koa middleware function Parameters: Name Type Argument Description ctx object The koa request and response context. See koajs about ctx details next KoaActionFunction &lt;optional&gt; Next middleware or action. Properties: Name Type Description ctx.reqeust object The koa request object. ctx.response object The koa response object. Source: serverFeatures/koa.js × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Modules Classes Controller BadParams BadRequest NoContent NotFound ServiceUnavailable Unauthorized WebModule WebServer Events httpReady Http server ready event Source: serverFeatures/koa.js × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Classes Classes Controller BadParams BadRequest NoContent NotFound ServiceUnavailable Unauthorized WebModule WebServer Events httpReady Http server ready event Source: serverFeatures/koa.js × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction @kbox/server A full-stack (aimed to be full-stack) web/mobile application framework based on genx-server. (ES7 required) http://code.innev.cn/innev-lab/Platform-Service-App 1. Concepts Server A genx server is a standalone node server acting as a hosting container for web applications. It mounts applications to configured routes either under the same hostname or different hostnames. A server will dispatch a http request to hosted applications according to the server routing settings. It may have server-wide middlewares touching every requests before dispatching them to the right application. Application A genx web application is a web module hosted by a genx server. It mounts controllers or middlewares to configured routes. Currenlty, an application is not running in a totally separate sandbox in the hosting environment. Controller A genx web controller is a plain object exported by a JavaScript module containing several actions to handle web requests and response to the reqeusting client. Action A genx web action is a koa2-styled action which is a async function and handles one client request at a time. Besides all the koa context, the code in a genx server action can also access the appModule object which represents the instance of the application. async (ctx, next) =&gt; { ... } Feature A feature is a configuratin-driven functional module of the server or an application. Built-in features include bootstrap, loggers, middlewares, koa, routing, i18n, and etc. Every feature is a top-level config item in the server configuraiton file or application configuration file. Starting Phrase The starting of a server or an application include 5 consecutive phrases: 1). Initial Phrase 2). Service Registration Phrase 3). Engine Configuration Phrase 4). Middleware Registration Phrase 5). Routing Configuration Phrase (The starting process of an application starts within the server's routing configuration phrase) A feature mentioned above is designed to be activated in a certain phrase which is specified in the feature definition file. Middleware A genx web middleware actually should be called a middleware factory. It is a function creating a koa-styled middleware. The middleware factory can be configured in the section of \"middlewares\" feature of the configuration file or as an option in the setting of a certain router. Router TBD. Oolong Oolong is an embeded domain specific language (DSL) in genx server. The oolong dsl engine will build database scripts, database access models and data-related UI according to oolong entity definition files. It also shipped with a CLI tool to do automatic deployment of the database structure. 2. Project Structure /conf - server or application configuration files /client - client-side source code /server - server-side source code /server/bootstrap - default path of bootstrap scripts (if boot feature is enabled in server or application config) /server/models - backend model files /server/controllers - backend controller files /server/views - backend view files /app_modules - child applications /server/db - database initial scripts including test data /server/models - database access models (usually automatically generated by oolong DSL) /oolong - oolong entity definition files /public - default path of static files (if serveStatic middleware is enabled) /middlewares - middlewares extension /features - features extension 3. Get Started Configurations 1) Server Configuration Environment specific configuration /conf/server.default.json /conf/server.development.json - Development specific configuration, overrides server.default.json /conf/server.production.json - Production specific configuration, overrides server.default.json 2) App Module Configuration Environment specific configuration /app_modules/&lt;module name&gt;/conf/app.default.json /app_modules/&lt;module name&gt;/conf/app.development.json - Development specific configuration, overrides app.default.json /app_modules/&lt;module name&gt;/conf/app.production.json - Production specific configuration, overrides app.default.json 3) Feature Configuration Each top-level key-value pair in the configuration file is the config of a feature, e.g. loggers, koa, mysql Key is the feature name Value is the feature's own config 4. Built-in Features Bootstrap Specify a path containing scripts to be executed during initial phrase. Options: [path] - Bootstrap scripts path, default: ./server/bootstrap 5. Convention Design by contract Refer to: https://www.npmjs.com/package/babel-plugin-contract Action this context appModule - the webModule instance state - the default view state for view renderer _self - Current landing url __ - i18n interface _makePath(relativePath, query) _makeUrl(relativePath, query) _csrf - if csrf middleware attached License MIT × Search results Close "},"Controller.html":{"id":"Controller.html","title":"Class: Controller","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: Controller Controller Controller base class. new Controller(app) Parameters: Name Type Description app Routable Source: patterns/Controller.js × Search results Close "},"module-Errors.html":{"id":"module-Errors.html","title":"Module: Errors","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Errors Error definitions. Source: utils/Errors.js Classes BadParams BadRequest NoContent NotFound ServiceUnavailable Unauthorized × Search results Close "},"module-Errors-BadParams.html":{"id":"module-Errors-BadParams.html","title":"Class: BadParams","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: BadParams Errors~ BadParams Params errors. new BadParams() Source: utils/Errors.js Extends BadParams × Search results Close "},"module-Errors-BadRequest.html":{"id":"module-Errors-BadRequest.html","title":"Class: BadRequest","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: BadRequest Errors~ BadRequest Request errors. new BadRequest() Source: utils/Errors.js Extends ExposableError × Search results Close "},"module-Errors-NoContent.html":{"id":"module-Errors-NoContent.html","title":"Class: NoContent","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: NoContent Errors~ NoContent content errors. new NoContent() Source: utils/Errors.js Extends NoContent × Search results Close "},"module-Errors-NotFound.html":{"id":"module-Errors-NotFound.html","title":"Class: NotFound","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: NotFound Errors~ NotFound Http NotFound, 404. new NotFound() Source: utils/Errors.js Extends ExposableError × Search results Close "},"module-Errors-ServiceUnavailable.html":{"id":"module-Errors-ServiceUnavailable.html","title":"Class: ServiceUnavailable","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: ServiceUnavailable Errors~ ServiceUnavailable Service unavailable error, 503 new ServiceUnavailable() Source: utils/Errors.js Extends GeneralError × Search results Close "},"module-Errors-Unauthorized.html":{"id":"module-Errors-Unauthorized.html","title":"Class: Unauthorized","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: Unauthorized Errors~ Unauthorized Http Unauthorized, 401. new Unauthorized() Source: utils/Errors.js Extends ExposableError × Search results Close "},"module-Feature_Acl.html":{"id":"module-Feature_Acl.html","title":"Module: Feature_Acl","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Acl Enable acl feature Source: features/acl.js Members &lt;static&gt; type :string This feature is loaded at service stage Type: string Source: features/acl.js Methods &lt;static&gt; load_(app, config) Load the feature Parameters: Name Type Description app Routable The app module object config object Acl settings Properties: Name Type Argument Description config.backend string Backend store type of acl, memory, mongodb, redis config.dataSource string &lt;optional&gt; Store type of acl config.prefix object &lt;optional&gt; Store options Source: features/acl.js Returns: Type Promise.&lt;*&gt; Example acl: { backend: 'mongodb.dataSourceName' } × Search results Close "},"module-Feature_AppRouting.html":{"id":"module-Feature_AppRouting.html","title":"Module: Feature_AppRouting","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_AppRouting Enable routing web requests to a child app. Source: serverFeatures/appRouting.js Example 'appRouting': { '&lt;mounting point&gt;': { name: 'app name', npmModule: false, // 是否 npm Module。用于从node modules中获取模块 options: { // app模块配置 env: 'default|prod', //可选，定义配置文件的环境。如：app.default.json 或 app.prod.json configName: 'app|module', //可选，定义配置文件名。如：app.default.json 或 module.prod.json }, settings: { // can override module defined settings }, middlewares: { // can override middlewares } } } Members &lt;static&gt; type :string This feature is loaded at plugin stage. Type: string Source: serverFeatures/appRouting.js Methods &lt;static&gt; load_(server, routes) Load the feature. Parameters: Name Type Description server WebServer The web server module object. routes object Routes and configuration. Source: serverFeatures/appRouting.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Firebase.html":{"id":"module-Feature_Firebase.html","title":"Module: Feature_Firebase","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Firebase Enable firebase feature. Source: features/firebaseAdmin.js Members &lt;static&gt; type :string This feature is loaded at service stage Type: string Source: features/firebaseAdmin.js Methods &lt;static&gt; load_(app, options) Load the feature Parameters: Name Type Description app App The app module object options object Options for the feature Properties: Name Type Description options.serviceAccount string The serivceAccount config file path. Source: features/firebaseAdmin.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Koa.html":{"id":"module-Feature_Koa.html","title":"Module: Feature_Koa","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Koa Enable koa-based web engine. Source: serverFeatures/koa.js Members &lt;static&gt; type :string This feature is loaded at service stage Type: string Source: serverFeatures/koa.js Methods &lt;static&gt; load_(server, options) Load the feature Parameters: Name Type Description server WebServer The web server options object Options for the feature Properties: Name Type Argument Default Description options.trustProxy bool &lt;optional&gt; When true proxy header fields will be trusted options.keys Array.&lt;string&gt; &lt;optional&gt; Set signed cookie keys options.httpPort int &lt;optional&gt; The http port number options.subdomainOffset int &lt;optional&gt; 2 The offset of subdomains to ignore, default: 2 Source: serverFeatures/koa.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_LibModules.html":{"id":"module-Feature_LibModules.html","title":"Module: Feature_LibModules","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_LibModules Load lib modules Source: serverFeatures/libModules.js Example 'libModules': { '&lt;name&gt;': { npmModule: false, // whether is a npm module options: { // module options }, settings: { // can override module defined settings } } } Members &lt;static&gt; type :string This feature is loaded at plugin stage. Type: string Source: serverFeatures/libModules.js Methods &lt;static&gt; load_(server, entries) Load the feature. Parameters: Name Type Description server WebServer The web server module object. entries object Lib module entries. Source: serverFeatures/libModules.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Middlewares.html":{"id":"module-Feature_Middlewares.html","title":"Module: Feature_Middlewares","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Middlewares Enable middlewares Source: appFeatures/middlewares.js Members &lt;static&gt; type :string This feature is loaded at plugin stage Type: string Source: appFeatures/middlewares.js Methods &lt;static&gt; load_(app, middlewares) Load the feature Parameters: Name Type Description app Routable The app module object middlewares * Middlewares and options Source: appFeatures/middlewares.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Monitor.html":{"id":"module-Feature_Monitor.html","title":"Module: Feature_Monitor","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Monitor Monitor feature Source: features/monitor.js Example { \"monitor\": { \"kafka\": { \"clientId\": \"monitor_log\", \"brokers\": [ \"host:port\" ] }, \"topic\": \"service_log_report\", \"service_name\": \"string\" } } × Search results Close "},"module-Feature_OAuth2.html":{"id":"module-Feature_OAuth2.html","title":"Module: Feature_OAuth2","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_OAuth2 Enable oauth2 feature Source: features/oauth2.js Example // 完整的 app.default.json 配置 { \"middlewares\": { \"serverPassport\": {} }, \"passport\": { \"useSession\": true, \"strategies\": [ \"local\", \"oauth2-client-password\" ] }, \"oauth2\": { \"strategy\": \"strategy\", \"preCheck\": [ \"passportCheck\", { \"successReturnToOrRedirect\": true, \"loginUrl\": \"/server/login.html\" } ], \"preAuth\": [ \"passportAuth\", { \"strategy\": [ \"oauth2-client-password\" ], \"options\": { \"session\": false } } ] }, \"routing\": { \"/oauth\": { \"rule\": { \"rules\": { \"get:/authorize\": [ \"oauth2Authorization\" ], \"post:/authorize/decision\": [ \"oauth2Decision\" ], \"post:/access_token\": [ \"oauth2Token\" ] } } } } } Members &lt;static&gt; type :string This feature is loaded at service stage Type: string Source: features/oauth2.js Methods &lt;static&gt; load_(app, config) Load the feature Parameters: Name Type Description app Routable The app module object config object Passport config Properties: Name Type Description config.strategy string Passport strategy, e.g. 'strategy' config.preCheck array Passport preCheck, e.g. [ \"passportCheck\", { \"successReturnToOrRedirect\": true, \"loginUrl\": \"/server/login.html\" } ] config.preAuth array Passport preAuth, e.g. [ \"passportAuth\", { \"strategy\": [ \"basic\", \"oauth2-client-password\" ], \"options\": { \"session\": false } } ] Source: features/oauth2.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_ObjectStore.html":{"id":"module-Feature_ObjectStore.html","title":"Module: Feature_ObjectStore","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_ObjectStore Enable object store feature Source: appFeatures/middlewareFactory.js Example \"middlewareFactory\": { //new middleware name \"listOfMiddleware\": { \"middleware1\": { // options ... }, \"middleware2\": { // options ... } }, \"altListOfMiddleware\": [ { \"name\": \"middleware1\", \"options\": { ... } }, [ \"middleware2\", { ... } ], \"middleware3\" ] }, Members &lt;static&gt; type :string This feature is loaded at init stage Type: string Source: appFeatures/middlewareFactory.js Methods &lt;static&gt; load_(app, factories) Load the feature Parameters: Name Type Description app App The app module object factories object Object factories Source: appFeatures/middlewareFactory.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Passport.html":{"id":"module-Feature_Passport.html","title":"Module: Feature_Passport","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Passport Enable passport feature Source: appFeatures/passport.js Members &lt;static&gt; type :string This feature is loaded at service stage Type: string Source: appFeatures/passport.js Methods &lt;static&gt; load_(app, config) Load the feature Parameters: Name Type Description app Routable The app module object config object Passport settings Properties: Name Type Argument Default Description config.useSession bool &lt;optional&gt; false Use session or not, default: false config.init object Passport initialization settings Properties Name Type Argument Default Description userProperty string &lt;optional&gt; 'user' User property name, default: user config.strategies array Passport strategies, e.g. [ 'local', 'facebook' ] config.exposeToServer array Expose the passport servcie to while server Source: appFeatures/passport.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_Routing.html":{"id":"module-Feature_Routing.html","title":"Module: Feature_Routing","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_Routing Enable web request routing. Source: appFeatures/routing.js Members &lt;static&gt; type :string This feature is loaded at ready (final) stage. Type: string Source: appFeatures/routing.js Methods &lt;static&gt; load_(app, routes) Load the feature. Parameters: Name Type Description app Routable The app module object routes object Routes and configuration Source: appFeatures/routing.js Returns: Type Promise.&lt;*&gt; × Search results Close "},"module-Feature_SocketServer.html":{"id":"module-Feature_SocketServer.html","title":"Module: Feature_SocketServer","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Feature_SocketServer Socket based Rpc Server 构建socket.io服务端，具体使用方法看下面例子 Source: appFeatures/socketServer.js Examples middleware: (packet, next) =&gt; {} // 服务端配置 \"socketServer\": { \"path\": \"/shoukeChannel\", //服务频道 \"controllersPath\": \"controllers\", //事件处理类的查找目录 \"routes\": { \"/shouke\": { //服务路由，注意这里是需要给客户端连接用的 \"events\": { \"send\": \"shoukeClass.send\", // 自定义send事件，并绑定到处理类和方法 \"msg\": \"shoukeClass.msg\", // 自定义msg事件，并绑定到处理类和方法 \"disconnect\": \"socket.disconnect\" // 自定义disconnect事件，并绑定到处理类和方法 } } } } // 服务端事件处理类: src/&lt;controllersPath&gt;/shoukeClass.js exports.msg = async (ctx, data) =&gt; { console.log(\"msg\", data); // 接收客户端发送的 msg 消息并输出 return ctx.socket.emit(\"message\", \"广播消息给客户端\"); // 广播 message 消息给客户端 } exports.disconnect = async (ctx, data) =&gt; { console.log(\"msg\", data); // 接收客户端发送的 disconnect 消息并输出 //TODO: 做其他断开连接的处理 } exports.send = async (ctx, data) =&gt; { console.log(\"send\", data); // 接收客户端发送的 send 消息并输出 return ctx.socket.emit(\"send\", \"广播消息给客户端\"); // 广播 send 消息给客户端 } // 客户端连接 // const socket = io(\"ws://localhost:3000/shouke\", { path: \"/shouke/shoukeChannel\" }); const socket = io(\"ws://localhost:&lt;prot&gt;/&lt;socket_route&gt;\", { path: \"/&lt;server_route&gt;/&lt;socket_path&gt;\" }); //初始化websocket，连接服务端 // 给服务端发送消息 socket.emit(\"send\", \"hello\"); // 接收服务端消息 socket.on(\"message\", function (data) { console.log(\"服务端发送的消息是：\", data); }); Members &lt;static&gt; type :string This feature is loaded at plugin stage Type: string Source: appFeatures/socketServer.js Methods &lt;static&gt; load_(appModule, servers) Load the rpc Server Parameters: Name Type Description appModule AppModule The app module object servers Array.&lt;ServerOptions&gt; Rpc server config Source: appFeatures/socketServer.js Type Definitions ServerOptions The socket server options. Type: Object Properties: Name Type Argument Default Description path string &lt;optional&gt; /socket.io name of the path to capture serveClient boolean &lt;optional&gt; true whether to serve the client files adapter Adapter the adapter to use. Defaults to an instance of the Adapter that ships with socket.io which is memory based. See socket.io-adapter origins string the allowed origins parser Parser the parser to use. Defaults to an instance of the Parser that ships with socket.io. See socket.io-parser Source: appFeatures/socketServer.js See: https://socket.io/docs/server-api/ for more options × Search results Close "},"module-Literal.html":{"id":"module-Literal.html","title":"Module: Literal","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Literal Common constants Source: enum/Literal.js Example const Literal = require('@kbox/server/lib/enum/Literal'); Members &lt;inner&gt; ALLOWED_HTTP_METHODS Allowed http methods Source: enum/Literal.js &lt;inner&gt; APP_FEATURES_PATH App specific features path Source: enum/Literal.js &lt;inner&gt; APP_MODULES_PATH App modules path Source: enum/Literal.js &lt;inner&gt; BACKEND_PATH Backend files path Source: enum/Literal.js &lt;inner&gt; BACKEND_SRC_PATH Backend source files path Source: enum/Literal.js &lt;inner&gt; CLIENT_SRC_PATH Frontend source files path, e.g. react source Source: enum/Literal.js &lt;inner&gt; CONTROLLERS_PATH Controllers files path, under backend folder Source: enum/Literal.js &lt;inner&gt; LOCALE_PATH Locale dictionary files path Source: enum/Literal.js &lt;inner&gt; MIDDLEWARES_PATH Middleware files path Source: enum/Literal.js &lt;inner&gt; PUBLIC_PATH Frontend static files path, e.g. images, css, js Source: enum/Literal.js &lt;inner&gt; RESOURCES_PATH Controllers files path, under backend folder Source: enum/Literal.js &lt;inner&gt; SERVER_CFG_NAME Server-wide config file name Source: enum/Literal.js &lt;inner&gt; SERVER_FEATURES_PATH Server features path Source: enum/Literal.js &lt;inner&gt; VIEWS_PATH Views files path, under backend folder Source: enum/Literal.js × Search results Close "},"module-Middleware_AccessLog.html":{"id":"module-Middleware_AccessLog.html","title":"Module: Middleware_AccessLog","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_AccessLog Add access log for every http request (require(\"Middleware_AccessLog\"))(name, app) Get a cached middleware from the app's object store. Parameters: Name Type Description name string Name of the middleware stored in the app's object store. app Routable Source: middlewares/fromStore.js Returns: Type AsyncFunction Module: Middleware_AccessLog Add access log for every http request (require(\"Middleware_AccessLog\"))(name, app) Get a cached middleware from the app's object store. Parameters: Name Type Description name string Name of the middleware stored in the app's object store. app Routable Source: middlewares/fromStore.js Returns: Type AsyncFunction × Search results Close "},"module-Middleware_Action.html":{"id":"module-Middleware_Action.html","title":"Module: Middleware_Action","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Action Response action as middleware (require(\"Middleware_Action\"))(controllerAction, app) Action middleware creator Parameters: Name Type Description controllerAction string app Routable Source: middlewares/action.js × Search results Close "},"module-Middleware_Csrf.html":{"id":"module-Middleware_Csrf.html","title":"Module: Middleware_Csrf","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Csrf Cross-Site Request Forgery (CSRF) middleware Source: middlewares/csrf.js × Search results Close "},"module-Middleware_Favicon.html":{"id":"module-Middleware_Favicon.html","title":"Module: Middleware_Favicon","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Favicon Middleware to serve favicon request. Source: middlewares/favicon.js × Search results Close "},"module-Middleware_FlashMessage.html":{"id":"module-Middleware_FlashMessage.html","title":"Module: Middleware_FlashMessage","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_FlashMessage (require(\"Middleware_FlashMessage\"))() add message to flash messages ctx.flashMessage.warning = 'Log Out Successfully!'; read all flash messages ctx.state.flashMessage.messages // or ctx.flashMessage.messages read warning message ctx.state.flashMessage.warning Source: middlewares/flashMessage.js × Search results Close "},"module-Middleware_JsonError.html":{"id":"module-Middleware_JsonError.html","title":"Module: Middleware_JsonError","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_JsonError Error response middleware with json Source: middlewares/jsonError.js × Search results Close "},"module-Middleware_KboxPassportCheck.html":{"id":"module-Middleware_KboxPassportCheck.html","title":"Module: Middleware_KboxPassportCheck","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_KboxPassportCheck KboxPassportCheck middleware (require(\"Middleware_KboxPassportCheck\"))(options, app) 结合passport进行用户登录前认证 Parameters: Name Type Description options object app Routable Properties: Name Type Argument Description options.appSecret string &lt;optional&gt; appSecret options.loginUrl string &lt;optional&gt; 未登录时跳转的地址 options.ignorePath array &lt;optional&gt; 忽略不需要登录的地址 options.successReturnToOrRedirect boolean &lt;optional&gt; 直接返回还是重定向 Source: middlewares/kboxPassportCheck.js Example \"middlewares\": [ [ \"kboxPassportCheck\", { \"loginUrl\": \"/login\", \"ignorePath\": [\"/home\", \"^\\/user/auth\\/.*\\/callback$\"] } ] ] × Search results Close "},"module-Middleware_KboxProxy.html":{"id":"module-Middleware_KboxProxy.html","title":"Module: Middleware_KboxProxy","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_KboxProxy Kbox Proxy middleware 代理中间件 Source: middlewares/kboxProxy.js Example [ \"kboxProxy\", { \"/eb\": { \"target\": \"http://192.168.0.249\", \"changeOrigin\": true }, \"/test\": { \"target\": \"http://192.168.0.249\", \"changeOrigin\": true, \"pathRewrite\": { \"^/test\": \"/eb\" } } } ] × Search results Close "},"module-Middleware_Markdown.html":{"id":"module-Middleware_Markdown.html","title":"Module: Middleware_Markdown","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Markdown Markdown middleware. Source: middlewares/markdown.js × Search results Close "},"module-Middleware_ParamsValidator.html":{"id":"module-Middleware_ParamsValidator.html","title":"Module: Middleware_ParamsValidator","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_ParamsValidator Middleware to verify params 参数校验器，使用标准的tv4格式schema进行校验 支持四种类型参数的校验：header, query, body, params Source: middlewares/paramsValidator.js Example exports.&lt;action&gt; = async ctx =&gt; {}; exports.&lt;action&gt;.__metaMiddlewares = [ [ \"paramsValidator\", { header: { \"type\": \"object\", \"properties\": { \"authorization\": { \"type\": \"string\" } }, \"required\": [ \"authorization\" ] }, query: { \"type\": \"object\", \"properties\": { \"test\": { \"type\": \"string\" }, \"test2\": { \"type\": \"string\" } }, \"required\": [ \"test\", \"test2\" ] }, body: { \"type\": \"object\", \"properties\": { \"test\": { \"type\": \"string\" }, \"test2\": { \"type\": \"string\" } }, \"required\": [ \"test\", \"test2\" ] }, params: { \"type\": \"object\", \"properties\": { \"id\": { \"type\": \"string\" } }, \"required\": [ \"id\" ] } } ]]; × Search results Close "},"module-Middleware_PassportAuth.html":{"id":"module-Middleware_PassportAuth.html","title":"Module: Middleware_PassportAuth","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_PassportAuth Passport initialization middleware, required to initialize Passport service. Source: middlewares/passportAuth.js Methods &lt;inner&gt; createMiddleware(opt, app) Create a passport authentication middleware. Parameters: Name Type Description opt object Passport options app Routable Properties: Name Type Argument Description opt.strategy string Passport strategy opt.options object &lt;optional&gt; Passport strategy options Source: middlewares/passportAuth.js Returns: Type KoaActionFunction × Search results Close "},"module-Middleware_PassportCheck.html":{"id":"module-Middleware_PassportCheck.html","title":"Module: Middleware_PassportCheck","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_PassportCheck Middleware to check user logged in status based on passport (require(\"Middleware_PassportCheck\"))(options, app) Initialize ensureLoggedIn middleware Parameters: Name Type Description options object app Routable Properties: Name Type Argument Description options.loginUrl string &lt;optional&gt; If given, will redirect to loginUrl if not loggedIn options.successReturnToOrRedirect boolean &lt;optional&gt; If given, will redirect to loginUrl if not loggedIn Source: middlewares/passportCheck.js × Search results Close "},"module-Middleware_Render.html":{"id":"module-Middleware_Render.html","title":"Module: Middleware_Render","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Render Render middleware (require(\"Middleware_Render\"))( [options], app) Initiate the render middleware Parameters: Name Type Argument Description options Object &lt;optional&gt; Template options app Routable The owner app module Properties: Name Type Argument Description options.locale string &lt;optional&gt; Request code file Source: middlewares/render.js Examples \"middlewares\": [ \"render\" ] //默认加载的编码包是 code-zh_cn.json OR \"middlewares\": { \"render\": {} } //默认加载的编码包是 code-zh_cn.json \"middlewares\": { \"render\": { \"locale\": \"code-zh_cn.json\" } } exports.home = async ctx =&gt; { const db = ctx.appModule.db('data_center.Province'); // 返回正确结果或页面 ctx.render.success(await db.find({})); // 使用render会赋值给 ctx.body ，不需要自己写 ctx.body = XXX // 返回错误结果或页面 ctx.render.error(new Error('错误')); // 使用render会赋值给 ctx.body ，不需要自己写 ctx.body = XXX // 赋值适配 ctx.render.adapter(40) // 数字类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":40} ctx.render.adapter(null) // Null, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":\"\"} ctx.render.adapter('Hello World!') // 字符类型, {\"code\":200,\"msg\":\"请求成功\",\"data\":\"Hello World!\"} ctx.render.adapter({ title: 'Hello World!' }) // Object类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":{\"title\":\"Hello World!\"}} ctx.render.adapter([ { title: 'Hello World!'}, { title: 'Hello World!' } ]) // 数组类型, 返回 {\"code\":200,\"msg\":\"请求成功\",\"data\":[{\"title\":\"Hello World!\"},{\"title\":\"Hello World!\"}]} ctx.render.adapter({ code: 200, data: 'Hello World!', msg: '正常' }) // 含有code的类型, 原样返回 {\"code\":200,\"data\":\"Hello World!\",\"msg\":\"正常\"} ctx.render.adapter({ code: 45, data: 'Hello World!', msg: '异常' }) // 含有code的类型, 原样返回 {\"code\":45,\"data\":\"Hello World!\",\"msg\":\"异常\"} ctx.render.adapter(new Error('程序中断')) // Error类型，返回 {\"code\":500,\"msg\":\"程序中断\",\"data\":\"程序中断\"} } × Search results Close "},"module-Middleware_ServerPassport.html":{"id":"module-Middleware_ServerPassport.html","title":"Module: Middleware_ServerPassport","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_ServerPassport Passport initialization middleware, use the passport service exposed by other app to server. Source: middlewares/serverPassport.js Methods &lt;inner&gt; serverPassport(opt, app) Create a passport authentication middleware. Parameters: Name Type Description opt object Passport options app Routable Properties: Name Type Argument Description opt.strategy string Passport strategy opt.options object &lt;optional&gt; Passport strategy options opt.customHandler object &lt;optional&gt; Flag to use passport strategy customHandler Source: middlewares/serverPassport.js Returns: Type KoaActionFunction × Search results Close "},"module-Middleware_ServeStatic.html":{"id":"module-Middleware_ServeStatic.html","title":"Module: Middleware_ServeStatic","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_ServeStatic Static file server middleware. Source: middlewares/serveStatic.js × Search results Close "},"module-Middleware_Session.html":{"id":"module-Middleware_Session.html","title":"Module: Middleware_Session","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Session Session middleware (require(\"Middleware_Session\"))(options, app) Initialize session middleware Parameters: Name Type Description options object Session options app Routable Properties: Name Type Argument Default Description options.key string &lt;optional&gt; 'mowa:sid' Cookie name defaulting to mowa.sid options.prefix string &lt;optional&gt; 'mowa:sess:' Session prefix for store, defaulting to mowa:sess: options.maxAge number &lt;optional&gt; SessionStore's expiration time (ms), defaulting to 86400000 (1 day) options.autoCommit bool &lt;optional&gt; true Automatically commit headers (default true) options.overwrite bool &lt;optional&gt; true Can overwrite or not (default true) options.httpOnly bool &lt;optional&gt; true HttpOnly or not (default true) options.signed bool &lt;optional&gt; true Signed or not options.rolling bool &lt;optional&gt; false Force a session identifier cookie to be set on every response. The expiration is reset to the original maxAge, resetting the expiration countdown. (default is false) options.renew bool &lt;optional&gt; false Renew session when session is nearly expired, so we can always keep user logged in. (default is false) options.genSid function &lt;optional&gt; The way of generating external session id is controlled by the options.genid, which defaults to Date.now() + '-' + uid.sync(24) options.valid function &lt;optional&gt; valid(ctx, session), valid session value before use it options.beforeSave function &lt;optional&gt; beforeSave(ctx, session), hook before save session options.store object &lt;optional&gt; Session store instance. It can be any Object that has the methods set, get, destroy like MemoryStore. Source: middlewares/session.js × Search results Close "},"module-Middleware_SessionVariables.html":{"id":"module-Middleware_SessionVariables.html","title":"Module: Middleware_SessionVariables","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_SessionVariables Middleware to prepare session-spe Source: middlewares/sessionVariables.js × Search results Close "},"module-Middleware_TemplatedError.html":{"id":"module-Middleware_TemplatedError.html","title":"Module: Middleware_TemplatedError","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_TemplatedError Error response middleware with template engines Source: middlewares/templatedError.js Methods &lt;inner&gt; koaError(options) Parameters: Name Type Description options Object Template options Properties: Name Type Argument Default Description options.template string Path to template written with your template engine options.engine string Path to template written with your template engine options.cache bool Path to template written with your template engine, default: NODE_ENV != 'development' options.env string &lt;optional&gt; 'development' Path to template written with your template engine options.accepts Array.&lt;string&gt; Mimetypes passed to ctx.accepts, default: [ 'html', 'text', 'json' ] Source: middlewares/templatedError.js × Search results Close "},"module-Middleware_Views.html":{"id":"module-Middleware_Views.html","title":"Module: Middleware_Views","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Middleware_Views Template View middleware (require(\"Middleware_Views\"))( [options], app) Initiate the views middleware Parameters: Name Type Argument Description options Object &lt;optional&gt; Template options app Routable The owner app module Properties: Name Type Argument Description options.extension string &lt;optional&gt; Default extension for your views options.map Object &lt;optional&gt; Extensions to engines map options.options Object &lt;optional&gt; View state locals Source: middlewares/views.js Examples \"middlewares\": [ \"views\" ] //使用默认的consolidate进行页面渲染 \"middlewares\": { \"views\": { \"map\": { \"html\": \"twig\" } } } exports.home = async ctx =&gt; { const data = { \"title\": \"Home Page\" }; // 单独使用页面渲染器 await ctx.viewRender(\"index\", data); // 使用viewRender对index.html进行渲染 // 跟render配合使用，render会根据请求类型自动判断渲染为页面或返回格式化json ctx.render.success(data, 'index'); // 跟render配合使用，对index.html进行渲染 （推荐方式） } × Search results Close "},"module-Router_Gaml.html":{"id":"module-Router_Gaml.html","title":"Module: Router_Gaml","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Router_Gaml Gaml router. (require(\"Router_Gaml\"))(app, baseRoute, options) Create a gaml router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gaml.js Example '&lt;base path&gt;': { gaml: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ × Search results Close "},"module-Router_Module.html":{"id":"module-Router_Module.html","title":"Module: Router_Module","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Router_Module Module router for mounting a specific controller. (require(\"Router_Module\"))(app, baseRoute, moduleItem) Create a module-based router. Parameters: Name Type Description app Routable baseRoute string moduleItem * Source: routers/module.js Example '&lt;base path&gt;': { module: { middlewares: controller: } } '&lt;base path&gt;': { module: \"controller\" } × Search results Close "},"module-Router_Rest.html":{"id":"module-Router_Rest.html","title":"Module: Router_Rest","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Router_Rest RESTful router. (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gateway.js Example '&lt;base path&gt;': { gateway: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list', metadataEndpoint: '/_meta' } } route http method function of ctrl /:resource get query /:resource post create /:resource/:id get detail /:resource/:id put update /:resource/:id delete remove (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rest.js Example '&lt;base path&gt;': { rest: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rpc.js Example '&lt;base path&gt;': { rpc: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list' } } route http method function of ctrl /:model/:method post model.method Module: Router_Rest RESTful router. (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gateway.js Example '&lt;base path&gt;': { gateway: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list', metadataEndpoint: '/_meta' } } route http method function of ctrl /:resource get query /:resource post create /:resource/:id get detail /:resource/:id put update /:resource/:id delete remove (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rest.js Example '&lt;base path&gt;': { rest: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rpc.js Example '&lt;base path&gt;': { rpc: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list' } } route http method function of ctrl /:model/:method post model.method Module: Router_Rest RESTful router. (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/gateway.js Example '&lt;base path&gt;': { gateway: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list', metadataEndpoint: '/_meta' } } route http method function of ctrl /:resource get query /:resource post create /:resource/:id get detail /:resource/:id put update /:resource/:id delete remove (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rest.js Example '&lt;base path&gt;': { rest: { resourcesPath: middlewares: } } route http method function of ctrl /:resource get findMany_ /:resource post create_ /:resource/:unique-key/:value get findOneBy_ /:resource/:id get findOne_ /:resource/:id put updateOne_ /:resource/:id del deleteOne_ (require(\"Router_Rest\"))(app, baseRoute, options) Create a RESTful router. Parameters: Name Type Description app * baseRoute string options objects Properties: Name Type Argument Description options.resourcesPath string &lt;optional&gt; options.middlewares object | array &lt;optional&gt; Source: routers/rpc.js Example '&lt;base path&gt;': { rpc: { middlewares: {}, schemaName: '', entityModels: {}|&lt;config path&gt;, apiListEndpoint: '/_list' } } route http method function of ctrl /:model/:method post model.method × Search results Close "},"module-Router_Rule.html":{"id":"module-Router_Rule.html","title":"Module: Router_Rule","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Module: Router_Rule Rule based router. Source: routers/rule.js Methods &lt;inner&gt; load_(app, baseRoute, options) Create a rule-based router. Parameters: Name Type Description app WebModule baseRoute string options object Source: routers/rule.js Example '&lt;base path&gt;': { rule: { middlewares: rules: { // type 1, default is \"get\", methods mapped to one action '&lt;sub route&gt;': '&lt;controller with relative path&gt;.&lt;action&gt;', // type 2, different methods mapped to different method '&lt;sub route&gt;': { '&lt;method&gt;': '&lt;controller with relative path&gt;.&lt;action&gt;' }, // type 3, with middleware '&lt;sub route&gt;': { '&lt;method&gt;': { '&lt;middleware name&gt;': { //middleware options } } }, // type 4, all methods mapped to one action '&lt;method&gt;:/&lt;sub route&gt;': '&lt;controller with relative path&gt;.&lt;action&gt;' // type 5, all methods mapped to one action '&lt;method&gt;:/&lt;sub route&gt;': { '&lt;middleware name&gt;': { //middleware options } } } } } × Search results Close "},"WebModule.html":{"id":"WebModule.html","title":"Class: WebModule","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: WebModule WebModule Web application module class. new WebModule(server, name, route, appPath [, options]) Parameters: Name Type Argument Description server WebServer name string The name of the app module. route string The base route of the app module. appPath string The path to load the app's module files options object &lt;optional&gt; The app module's extra options defined in its parent's configuration. Properties: Name Type Argument Default Description options.logWithAppName bool &lt;optional&gt; false Flag to include app name in log message. Source: WebModule.js Extends Routable(LibModule) Members route :string Mounting route. Type: string Source: WebModule.js × Search results Close "},"WebServer.html":{"id":"WebServer.html","title":"Class: WebServer","body":" @kbox/server Modules ErrorsFeature_AclFeature_AppRoutingFeature_FirebaseFeature_KoaFeature_LibModulesFeature_MiddlewaresFeature_MonitorFeature_OAuth2Feature_ObjectStoreFeature_PassportFeature_RoutingFeature_SocketServerLiteralMiddleware_AccessLogMiddleware_ActionMiddleware_CsrfMiddleware_FaviconMiddleware_FlashMessageMiddleware_JsonErrorMiddleware_KboxPassportCheckMiddleware_KboxProxyMiddleware_MarkdownMiddleware_ParamsValidatorMiddleware_PassportAuthMiddleware_PassportCheckMiddleware_RenderMiddleware_ServerPassportMiddleware_ServeStaticMiddleware_SessionMiddleware_SessionVariablesMiddleware_TemplatedErrorMiddleware_ViewsRouter_GamlRouter_ModuleRouter_RestRouter_Rule Classes ControllerErrors~BadParamsErrors~BadRequestErrors~NoContentErrors~NotFoundErrors~ServiceUnavailableErrors~UnauthorizedWebModuleWebServer Events WebServer#event:httpReady Global addRouteaddRouterdefaultBackendPathencodinggetMiddlewareFactorygetServiceloadMiddlewaresFromlogregisterMiddlewareFactoryrequirerequireFromLibtoWebPathuseMiddlewareswrapAction Class: WebServer WebServer Web server class. new WebServer( [name] [, options]) Parameters: Name Type Argument Default Description name string &lt;optional&gt; 'server' The name of the server. options object &lt;optional&gt; The app module's extra options defined in its parent's configuration. Properties: Name Type Argument Default Description options.logger object &lt;optional&gt; Logger options options.verbose bool &lt;optional&gt; false Flag to output trivial information for diagnostics options.env string &lt;optional&gt; Environment, default to process.env.NODE_ENV options.workingPath string &lt;optional&gt; App's working path, default to process.cwd() options.configPath string &lt;optional&gt; App's config path, default to \"conf\" under workingPath options.configName string &lt;optional&gt; App's config basename, default to \"app\" options.backendPath string &lt;optional&gt; 'server' Relative path of back-end server source files options.clientPath string &lt;optional&gt; 'client' Relative path of front-end client source files options.publicPath string &lt;optional&gt; 'public' Relative path of front-end static files options.appModulesPath string &lt;optional&gt; app_modules Relative path of child modules Source: WebServer.js Extends Routable(App) Members appModulesPath :string App modules path. Type: string Source: WebServer.js backendPath :string Backend files path. Type: string Source: WebServer.js isServer :boolean Whether it is a server. Type: boolean Source: WebServer.js route :string Base route. Type: string Source: WebServer.js server :WebServer Hosting server. Type: WebServer Source: WebServer.js Methods getAppByAlias(a) Get the app module object by app alias, usually the app name if no duplicate entry Parameters: Name Type Description a string App module alias Source: WebServer.js getAppByRoute(p) Get the app module object by base route Parameters: Name Type Description p string App module base route started with \"/\" Source: WebServer.js getLib(libName) Get the lib module Parameters: Name Type Description libName string Source: WebServer.js getService(name) Get a registered service Parameters: Name Type Description name string Source: WebServer.js mountApp(app) Mount an app at specified route. Parameters: Name Type Description app WebModule Source: WebServer.js registerLib(lib) Register a loaded lib module Parameters: Name Type Description lib LibModule Source: WebServer.js requireFromLib(relativePath) Require a module from the source path of a library module Parameters: Name Type Description relativePath * Source: WebServer.js Events httpReady Http server ready event Source: serverFeatures/koa.js × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
